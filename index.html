<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <meta name="Author" content="Noah">
    <meta name="Keywords" content="映像星球,发布页,最新地址"> 
    <meta name="Description" content="映像星球永久发布页 - 获取最新官网地址。"> 
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="/favicon.ico"> 
    <title>映像星球-永久发布页</title>

    <link href="css/normalize.css" rel="stylesheet"> 
    <link href="https://fonts.cdnfonts.com/css/opposans" rel="stylesheet">
    <link href="css/index.css" rel="stylesheet"> 
    <script src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/clipboard.js/2.0.10/clipboard.min.js"></script>
    <style>
        /* 布局调整：将左侧面板居中，删除右侧空间 */
        .panel-content {
            display: flex;
            justify-content: center; /* 居中 */
            gap: 0;
        }
        .panel-left {
            width: 100%;
            max-width: 600px; /* 限制宽度，防止在PC端过宽 */
        }

        /* 顶部导航提醒样式 */
        .nav-notice {
            background: linear-gradient(90deg, #ff4b2b, #ff416c);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(255, 75, 43, 0.3);
            border: 1px solid rgba(255,255,255,0.2);
        }
        .nav-notice p {
            margin: 0;
            font-size: 14px;
            opacity: 0.9;
        }
        .nav-notice strong {
            display: block;
            font-size: 22px;
            margin: 5px 0;
            letter-spacing: 1px;
        }
        .btn-copy-nav {
            background: white;
            color: #ff4b2b;
            border: none;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            font-size: 13px;
            margin-top: 5px;
            transition: all 0.3s;
        }
        .btn-copy-nav:hover {
            transform: scale(1.05);
            background: #fdfdfd;
        }

        /* 二维码部分调整 */
        .qr-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin-top: 10px;
        }
        .qr-img {
            width: 140px;
            height: 140px;
            background: white;
            padding: 8px;
            border-radius: 8px;
        }

        /* 原始样式保留 */
        .header img { width: 150px; height: auto; display: block; }
        .speed-result { font-size: 11px; color: #ccc; min-width: 95px; display: inline-block; font-weight: bold; margin-right: 8px;}
        .speed-result.testing { color: #ffc107; }
        .speed-result.success { color: #28a745; }
        .speed-result.error   { color: #dc3545; }
        .action-area { display: flex; align-items: center; margin-left: auto; flex-shrink: 0; }
        .panel-left .panel-box .row { height: auto; min-height: 70px; display: flex; padding: 10px 20px; width: 100%; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px; }
        .panel-left .panel-box .row .text { flex-grow: 1; display: flex; flex-direction: column; gap: 2px; margin-right: 10px; min-width: 150px; }
        .panel-left .panel-box .row .text p.p2 { font-size: 12px; color: #bdbdbd; word-break: break-all; }
    </style>

    <script>
        function copyBtn() { /* ClipboardJS 处理 */ }
    </script>
</head>
<body>
<div class="page-body">
    <div class="page-mark"></div>
    <div class="page-center">
        <div class="header">
            <img alt="Logo" src="img/bea51e2dca5dd1ac3e782268ec5303cf.png" style="width: 210px; height: 60px;">
        </div>
        <div class="top-line"></div>

        <div class="panel-content">
            <div class="panel-left">
                <!-- 新增：明显导航提示 -->
                <div class="nav-notice">
                    <p>务必保存，永久导航域名</p>
                    <strong id="nav-url">yxxq.site</strong>
                    <button class="btn-copy-nav" data-clipboard-text="yxxq.site" onclick="alert('导航域名 yxxq.site 复制成功！请粘贴至浏览器收藏夹。')">点击复制并收藏</button>
                </div>

                <div class="title-info">
                    <div class="title-i"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g opacity="0.4" clip-path="url(#clip0_157_14557)"><path d="M12 22C6.477 22 2 17.523 2 12C2 6.47703 6.477 2.00003 12 2.00003C17.523 2.00003 22 6.47703 22 12C22 17.523 17.523 22 12 22ZM9.71 19.667C8.72341 17.5743 8.15187 15.3102 8.027 13H4.062C4.25659 14.5389 4.89392 15.9882 5.89657 17.1717C6.89922 18.3553 8.22401 19.2222 9.71 19.667ZM10.03 13C10.181 15.439 10.878 17.73 12 19.752C13.1523 17.6766 13.8254 15.3695 13.97 13H10.03ZM19.938 13H15.973C15.8481 15.3102 15.2766 17.5743 14.29 19.667C15.776 19.2222 17.1008 18.3553 18.1034 17.1717C19.1061 15.9882 19.7434 14.5389 19.938 13ZM4.062 11H8.027C8.15187 8.68982 8.72341 6.42572 9.71 4.33303C8.22401 4.77791 6.89922 5.64478 5.89657 6.82833C4.89392 8.01187 4.25659 9.46113 4.062 11ZM10.031 11H13.969C13.8248 8.63063 13.152 6.32356 12 4.24803C10.8477 6.32348 10.1746 8.63055 10.03 11H10.031ZM14.29 4.33303C15.2766 6.42572 15.8481 8.68982 15.973 11H19.938C19.7434 9.46113 19.1061 8.01187 18.1034 6.82833C17.1008 5.64478 15.776 4.77791 14.29 4.33303Z" fill="white"></path></g></svg></div>
                    <div class="title-t">快捷访问列表</div>
                </div>
                <div class="panel-box">
                    <!-- 第一行：复制发布页链接 -->
                    <div class="row">
                        <div class="text">
                            <p class="p1">将本站地址分享给好友</p>
                            <p class="p2" id="share-url">加载中...</p> 
                        </div>
                        <div class="action-area">
                            <span class="speed-result"></span>
                            <a id="copy-share-link" href="#" class="btn">复制链接</a> 
                        </div>
                    </div>
                    
                    <!-- 动态域名行将通过 JS 插入到这里 -->
                    <div id="dynamic-rows"></div>

                    <!-- 固定二维码区域 -->
                    <div class="top-line nomp"></div>
                    <div class="qr-section">
                        <img src="img/qr.png" alt="二维码" class="qr-img">
                        <div style="margin-top: 10px; font-size: 12px; color: white;">长按保存二维码或扫描访问</div>
                    </div>
                </div> 
            </div> 
        </div> 

        <div class="foot">
            ©2025 映像星球. All Rights Reserved
        </div>
    </div> 
</div> 

<script src="js/domains.js"></script>
<script>
    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [array[i], array[j]] = [array[j], array[i]]; }
    }

    async function runSpeedTest(rowElement) {
        const resultSpan = rowElement.querySelector('.speed-result');
        const targetLink = rowElement.querySelector('a');
        let urlToTest = targetLink.href;

        if (!urlToTest || !urlToTest.startsWith('http')) return;
        
        resultSpan.textContent = '测速中...';
        resultSpan.className = 'speed-result testing';

        const startTime = performance.now();
        try {
            const controller = new AbortController();
            setTimeout(() => controller.abort(), 5000);
            await fetch(urlToTest, { method: 'HEAD', mode: 'no-cors', signal: controller.signal });
            const duration = Math.max(10, Math.floor(performance.now() - startTime));
            resultSpan.textContent = `延迟 ${duration} ms`;
            resultSpan.className = 'speed-result success';
        } catch (err) {
            resultSpan.textContent = '访问超时';
            resultSpan.className = 'speed-result error';
        }
    }

    document.addEventListener('DOMContentLoaded', function() {
        // 初始化导航域名复制
        new ClipboardJS('.btn-copy-nav');

        // 设置当前页面分享链接
        const currentUrl = window.location.href;
        document.getElementById('share-url').textContent = currentUrl;
        const copyShare = new ClipboardJS('#copy-share-link', { text: () => currentUrl });
        copyShare.on('success', () => alert('发布页链接复制成功！'));

        // 加载域名列表
        if (typeof domainList !== 'undefined' && domainList.length > 0) {
            const container = document.getElementById('dynamic-rows');
            let shuffled = [...domainList];
            shuffleArray(shuffled);

            shuffled.slice(0, 4).forEach((domain, index) => {
                const row = document.createElement('div');
                row.className = 'row-wrapper';
                row.innerHTML = `
                    <div class="top-line nomp"></div>
                    <div class="row">
                        <div class="text">
                            <p class="p1">备用网址 ${index + 1} ${index===0?'<span class="p1span">推荐</span>':''}</p>
                            <p class="p2">${domain}</p>
                        </div>
                        <div class="action-area">
                            <span class="speed-result"></span>
                            <a href="${domain}" target="_blank" class="btn-down">点击进入</a>
                        </div>
                    </div>
                `;
                container.appendChild(row);
                setTimeout(() => runSpeedTest(row), index * 300);
            });
        }
    });
</script>
</body>
</html>
